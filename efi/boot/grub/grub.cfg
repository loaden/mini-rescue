#
# Mini Rescue GRUB configuration
#

search --file /DENG --set root
set prefix=($root)/boot/grub

insmod all_video
insmod gfxterm
terminal_output gfxterm
loadfont yuchen

set default=0
set timeout=2
set gfxmode=auto

function create_menu {
    set desc="$1"
    set lang="$2"
    set cntry="$3"
    set extra="$4"
    set options="locales=${lang}_${cntry}.UTF-8 keyboard-layouts=${cntry} ${extra}"

    menuentry "$desc" --class $cntry $options {
        shift 1
        set options="$*"
        linux /vmlinuz boot=live quiet splash noprompt ${options}
        initrd /initrd
    }
}

menuentry "Mini Rescue $VERSION" --class mini {
    linux /vmlinuz boot=live quiet splash noprompt nocomponents setkmap=us
    initrd /initrd
}

menuentry "Safe video mode" --class safe {
    linux /vmlinuz boot=live quiet splash noprompt nocomponents nomodeset toram setkmap=us
    initrd /initrd
}
